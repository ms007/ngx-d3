<div class="segmented-bar-chart-tooltip"></div>
<svg class="segmented-bar-chart" [attr.width]="width" [attr.height]="height" style="background-color: #ffffff;">
  <g class="axis-x" transform="translate(0.5, 0.5)">
    <line [attr.x1]="barOffsetLeft" [attr.x2]="width-barOffsetRight-1" [attr.y1]="barOffsetTop" [attr.y2]="barOffsetTop" stroke="#000000"></line>
    <g class="ticks">
      <g class="tick" *ngFor="let tick of ticks; let idx = index; let last = last">
        <line [attr.x1]="tick.x" [attr.x2]="tick.x" [attr.y1]="barOffsetTop-5" [attr.y2]="barOffsetTop" stroke="#000000"></line>
        <text [attr.x]="tick.x" [attr.y]="(barOffsetTop-5)/2">{{ (!last) ? tick.value : '' }}</text>
      </g>
    </g>

  </g>
  <g class="segments" transform="translate(0.5, 0.5)">
    <text class="segment-text-measurement" [attr.fill-opacity]="0">Hg</text>
    <rect class="clickable-area"
          [attr.x]="-.5" [attr.y]="-.5" [attr.width]="width" [attr.height]="height"
          [attr.fill]="'#ffffff'" [attr.fill-opacity]="0"
          (click)="clickedChart($event)"
      ></rect>
    <g class="segment" *ngFor="let segment of segments; let idx = index">
      <text [attr.x]="segment.text.x" [attr.y]="segment.text.y" [attr.fill]="segment.color"
            [attr.fill-opacity]="segment.text.opacity"
        >{{ segment.data.caption }}</text>
      <rect [attr.x]="segment.rect.x" [attr.y]="segment.rect.y" [attr.width]="segment.rect.width" [attr.height]="segment.rect.height"
            [attr.fill]="segment.color" [attr.fill-opacity]="segment.rect.opacity" 
            [attr.stroke]="segment.color" [attr.stroke-opacity]="segment.rect.opacity"
            (click)="clickedSegment(segment)"
        ></rect>
    </g>
  </g>
</svg>